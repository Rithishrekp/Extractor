<!DOCTYPE html>
<html>
<head>
    <title>Smart Multilingual Document Extractor & Classifier</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            background-color: #f2f2f2;
        }
        h1 { text-align: center; color: #2c3e50; }
        form {
            background: #fff; padding: 20px; border-radius: 10px;
            max-width: 600px; margin: 0 auto 30px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        input[type=file], input[type=submit], select {
            width: 100%; padding: 12px; margin: 8px 0 16px;
        }
        .result-box {
            background: #fff; padding: 20px; border-radius: 10px;
            max-width: 900px; margin: 0 auto 30px;
            box-shadow: 0 0 8px rgba(0,0,0,0.1);
        }
        .result-box h2 { color: #2980b9; margin-bottom: 10px; }
        pre {
            background: #f9f9f9; padding: 10px; white-space: pre-wrap;
            border-left: 4px solid #3498db;
        }
        .field-detected { font-weight: bold; color: green; }
        .keyword-list { list-style: none; padding: 0; margin: 0; }
        .keyword-list li {
            display: inline-block; background: tan; color: #333;
            padding: 6px 12px; margin: 4px; border-radius: 20px;
            font-size: 14px; font-weight: bold;
        }
        .keyword-group { margin-bottom: 15px; }
        .keyword-group h3 { margin-bottom: 5px; color: #c0392b; }
        .keybert-keyword {
            display: inline-block; background: #d1e7dd; color: #0f5132;
            padding: 6px 12px; margin: 4px; border-radius: 20px;
            font-size: 14px; font-weight: bold;
        }
        table.entity-table {
            width: 100%; border-collapse: collapse; margin-top: 10px;
        }
        table.entity-table th, table.entity-table td {
            border: 1px solid #ccc; padding: 8px; text-align: left;
        }
        table.entity-table th {
            background: #f0f0f0; color: #2c3e50;
        }
        @media (max-width: 600px) {
            .result-box { padding: 15px; margin: 0 10px 20px; }
            input[type=file], input[type=submit], select { padding: 10px; }
        }
        /* ================= AUTH STYLES ================= */
.auth-container {
    position: fixed;
    inset: 0;
    background: linear-gradient(135deg, #667eea, #764ba2);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
}

.auth-card {
    background: rgba(255,255,255,0.95);
    padding: 35px;
    width: 360px;
    border-radius: 15px;
    box-shadow: 0 15px 40px rgba(0,0,0,0.3);
    animation: fadeIn 0.6s ease;
}

.auth-card h2 {
    text-align: center;
    margin-bottom: 20px;
    color: #2c3e50;
}

.auth-card input {
    width: 100%;
    padding: 12px;
    margin-bottom: 15px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 15px;
}

.auth-card button {
    width: 100%;
    padding: 12px;
    background: linear-gradient(135deg, #2980b9, #6dd5fa);
    color: white;
    font-size: 16px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}

.auth-card button:hover {
    opacity: 0.9;
}

.switch-text {
    text-align: center;
    margin-top: 15px;
    font-size: 14px;
}

.switch-text span {
    color: #2980b9;
    font-weight: bold;
    cursor: pointer;
}

@keyframes fadeIn {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
}

    </style>
</head>
<body>

<h1>üìÑ Smart Document Extractor & Field Identifier</h1>

<!-- Upload Form -->
<form method="post" enctype="multipart/form-data">
    <label><strong>Select a document:</strong></label>
    <input type="file" name="document" accept=".pdf,.docx,.txt,.png,.jpg,.jpeg" required>

    <!-- üåç Language Selection -->
    <label><strong>Select target language:</strong></label>
    <select name="lang">
        <option value="en" {% if target_lang=='en' %}selected{% endif %}>English</option>
        <option value="hi" {% if target_lang=='hi' %}selected{% endif %}>Hindi</option>
        <option value="ta" {% if target_lang=='ta' %}selected{% endif %}>Tamil</option>
        <option value="te" {% if target_lang=='te' %}selected{% endif %}>Telugu</option>
        <option value="kn" {% if target_lang=='kn' %}selected{% endif %}>Kannada</option>
        <option value="ml" {% if target_lang=='ml' %}selected{% endif %}>Malayalam</option>
        <option value="mr" {% if target_lang=='mr' %}selected{% endif %}>Marathi</option>
        <option value="bn" {% if target_lang=='bn' %}selected{% endif %}>Bengali</option>
        <option value="gu" {% if target_lang=='gu' %}selected{% endif %}>Gujarati</option>
        <option value="pa" {% if target_lang=='pa' %}selected{% endif %}>Punjabi</option>
        <option value="ur" {% if target_lang=='ur' %}selected{% endif %}>Urdu</option>
        <option value="fr" {% if target_lang=='fr' %}selected{% endif %}>French</option>
        <option value="de" {% if target_lang=='de' %}selected{% endif %}>German</option>
        <option value="es" {% if target_lang=='es' %}selected{% endif %}>Spanish</option>
        <option value="zh-cn" {% if target_lang=='zh-cn' %}selected{% endif %}>Chinese (Simplified)</option>
        <option value="ja" {% if target_lang=='ja' %}selected{% endif %}>Japanese</option>
    </select>

    <input type="submit" value="Upload & Analyze">
</form>

<!-- Detected Field -->
{% if detected_field %}
<div class="result-box">
    <h2>üß† Detected Field: <span class="field-detected">{{ detected_field }}</span></h2>
</div>
{% endif %}

<!-- Extracted Keywords -->
{% if extracted %}
<div class="result-box">
    <h2>üîë Extracted Keywords:</h2>
    {% for group, kw_list in extracted.items() %}
        {% if kw_list %}
        <div class="keyword-group">
            <h3>{{ group }}:</h3>
            <ul class="keyword-list">
                {% for keyword in kw_list %}
                    <li>{{ keyword }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
    {% endfor %}
</div>
{% endif %}

<!-- üåç Translated Keywords -->
{% if translated_keywords %}
<div class="result-box">
    <h2>üåê Translated Keywords ({{ target_lang }}):</h2>
    {% for group, kw_list in translated_keywords.items() %}
        {% if kw_list %}
        <div class="keyword-group">
            <h3>{{ group }}:</h3>
            <ul class="keyword-list">
                {% for keyword in kw_list %}
                    <li>{{ keyword }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
    {% endfor %}
</div>
{% endif %}

<!-- KeyBERT Keywords -->
{% if keybert_keywords %}
<div class="result-box">
    <h2>‚ú® KeyBERT Keywords (Summary):</h2>
    {% for kw in keybert_keywords %}
        <span class="keybert-keyword">{{ kw }}</span>
    {% endfor %}
</div>
{% endif %}

<!-- üìù Summarized Texts -->
{% if ex_summary %}
<div class="result-box">
    <h2>üìù Extractive Summary (English):</h2>
    <pre>{{ ex_summary }}</pre>
</div>
{% endif %}

{% if translated_ex_summary and target_lang != 'en' %}
<div class="result-box">
    <h2>üåê Extractive Summary ({{ target_lang }}):</h2>
    <pre>{{ translated_ex_summary }}</pre>
</div>
{% endif %}

{% if ab_summary %}
<div class="result-box">
    <h2>üìù Abstractive Summary (English):</h2>
    <pre>{{ ab_summary }}</pre>
</div>
{% endif %}

{% if translated_ab_summary and target_lang != 'en' %}
<div class="result-box">
    <h2>üåê Abstractive Summary ({{ target_lang }}):</h2>
    <pre>{{ translated_ab_summary }}</pre>
</div>
{% endif %}

<!-- Extracted Text -->
{% if full_text %}
<div class="result-box">
    <h2>üìú Extracted Text:</h2>
    <pre>{{ full_text }}</pre>
</div>
{% endif %}

<!-- üåç Translated Text -->
{% if translated_text and target_lang != 'en' %}
<div class="result-box">
    <h2>üåê Translated Text ({{ target_lang }}):</h2>
    <pre>{{ translated_text }}</pre>
</div>
{% endif %}
<hr>
<h2>Uploaded Files</h2>
<div class="uploaded-section">
  {% if files_by_category %}
    {% for category, files in files_by_category.items() %}
      <h3>{{ category }}</h3>
      <ul>
        {% for file in files %}
            {% if file %}
            <li><a href="{{ url_for('uploaded_file', filename=file) }}" target="_blank">{{ file }}</a></li>
            {% endif %}
        {% endfor %}
      </ul>
    {% endfor %}
  {% else %}
    <p>No files uploaded yet.</p>
  

  {% endif %}
</div>
{% if extracted_text %}
<div class="card">
  <h3>üìÑ Extracted Text</h3>
  <p>{{ extracted_text }}</p>
  <audio controls>
    <source src="{{ url_for('static', filename=audio_extracted) }}" type="audio/mpeg">
  </audio>
</div>
{% endif %}

{% if keywords %}
<div class="card">
  <h3>üîë Keywords</h3>
  <p>{{ keywords }}</p>
  <audio controls>
    <source src="{{ url_for('static', filename=audio_keywords) }}" type="audio/mpeg">
  </audio>
</div>
{% endif %}

{% if summary %}
<div class="card">
  <h3>üìù Summary</h3>
  <p>{{ summary }}</p>
  <audio controls>
    <source src="{{ url_for('static', filename=audio_summary) }}" type="audio/mpeg">
  </audio>
</div>
{% endif %}

{% if translation %}
<div class="card">
  <h3>üåç Translation</h3>
  <p>{{ translation }}</p>
  <audio controls>
    <source src="{{ url_for('static', filename=audio_translation) }}" type="audio/mpeg">
  </audio>
</div>
{% endif %}



<!-- Display Extracted Keywords -->
<h2>Extracted Keywords</h2>

{% if extracted %}
    <ul>
    {% for k, v in extracted.items() %}
        <li>
            <strong>{{ k }}:</strong>
            {% if v is iterable and v|length > 0 %}
                {{ v | join(", ") }}
            {% else %}
                None
            {% endif %}
        </li>
    {% endfor %}
    </ul>
{% else %}
    <p>No keywords extracted.</p>
{% endif %}


<hr>
<h2>üéß Full Narration</h2>

{% if audio_combined %}
<audio controls>
  <source src="{{ url_for('static', filename=audio_combined) }}" type="audio/mpeg">
</audio>
{% endif %}

<!-- ================= AUTH SECTION ================= -->
<div class="auth-container" id="authContainer">
    <div class="auth-card">
        <h2 id="authTitle">üîê Login</h2>

        <!-- Login Form -->
        <form id="loginForm">
            <input type="email" placeholder="Email" required>
            <input type="password" placeholder="Password" required>
            <button type="submit">Login</button>
            <p class="switch-text">
                Don‚Äôt have an account?
                <span onclick="showSignup()">Create one</span>
            </p>
        </form>

        <!-- Signup Form -->
        <form id="signupForm" style="display:none;">
            <input type="text" placeholder="Full Name" required>
            <input type="email" placeholder="Email" required>
            <input type="password" placeholder="Password" required>
            <input type="password" placeholder="Confirm Password" required>
            <button type="submit">Sign Up</button>
            <p class="switch-text">
                Already have an account?
                <span onclick="showLogin()">Login</span>
            </p>
        </form>
    </div>
</div>


<script>
function showSignup() {
    document.getElementById("loginForm").style.display = "none";
    document.getElementById("signupForm").style.display = "block";
    document.getElementById("authTitle").innerText = "üìù Sign Up";
}

function showLogin() {
    document.getElementById("signupForm").style.display = "none";
    document.getElementById("loginForm").style.display = "block";
    document.getElementById("authTitle").innerText = "üîê Login";
}

/* TEMPORARY: Hide auth after login */
document.getElementById("loginForm").onsubmit = function(e) {
    e.preventDefault();
    document.getElementById("authContainer").style.display = "none";
};

document.getElementById("signupForm").onsubmit = function(e) {
    e.preventDefault();
    alert("Signup successful! Please login.");
    showLogin();
};
</script>







</body>
</html>